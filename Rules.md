# 규칙

## 도형

### 도형 계층 구조

#### 기초

- 모든 도형들은 부모와 자식을 가진다. 예를 들어, B와 C가 A를 공통으로 부모로 가진다면 A의 자식은 B와 C가 될 것이다.
    - 하나의 도형은 여러개의 부모를 가질 수 있고, 여러개의 자식을 가질 수 있고, 또한 부모와 자식을 가지지 않을 수도 있다.

- 도형의 부모와 자식의 위치 관계를 조정해주는 것을 도형의 규칙이라고 한다.
    - 도형의 규칙은 도형마다 없거나 하나씩만 있을 수 있다.
    - 도형의 규칙은 도형을 움직였을 때 도형의 부모, 자식의 위치를 조정하는 역할을 한다.
    - 규칙은 부모-자식 관계에서 자식 도형에 적용된다. 즉, 규칙이 도형에 적용되었다는 말은 그 도형과 - 그 도형의 부모간의 부모-자식 관계를 말한다.
    
#### 움직임

- 일반적으로 도형의 움직임은 다음의 루틴을 따른다.
    1. 도형의 부모의 위치를 조정한다.
    2. 도형의 위치를 부모의 위치에 맞게 재조정한다.
    3. 바뀐 위치에 맞게끔 자식들을 움직인다.

- 도형이 움직일 때 움직임을 제한받는 경우가 있고, 전혀 움직이지 못하는 경우도 있다.
- 규칙에서 도형의 위치를 조정하는 변수가 따로 존재할 수 있다.
    - 선분을 내분하는 점의 경우 규칙이 기억하는 내분 비율은 부모(선분)이 움직일 때는 바뀌지 않고 자식(자기자신)이 움직일 때만 바뀐다.

#### 삭제

- 도형의 삭제는 도형의 규칙과는 상관 없이 모든 도형에게 동일하게 적용된다.

- 한 도형이 삭제되면 그 도형의 자식들을 재귀적으로 삭제한다. 도형의 부모에는 가는 영향이 없다.

## UI

TODO
